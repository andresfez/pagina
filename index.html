<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="estilos.css">
  <title>Inicio</title>
</head>

<body>
  <main class="card">
    <h1>Bienvenid@</h1>
    <p>
      Antes de continuar, escribe el texto solicitado. Si está correcto, se habilitará el botón para seguir.
    </p>

    <div class="field">
      <input
        id="authInput"
        type="text"
        placeholder="Escribe aquí el texto..."
        autocomplete="off"
        spellcheck="false"
      />
    </div>

    <div class="row">
      <button id="btnContinuar" disabled>Continuar</button>
      <span class="hint">Tip: puedes presionar Enter para validar.</span>
    </div>

    <div id="msgBox" class="msg"></div>
  </main>

  <script>
    // ================================
    // CONFIG: clave
    // ================================
    const CLAVE_CORRECTA = "sadhe"; // <-- cámbialo

    // NO importan mayúsculas/minúsculas
    const NORMALIZAR = true;

    const input = document.getElementById("authInput");
    const btn = document.getElementById("btnContinuar");
    const msg = document.getElementById("msgBox");

    function normalizarTexto(s){
      return s.trim().replace(/\s+/g, " ").toLowerCase();
    }

    function esCorrecto(valor){
      if (!NORMALIZAR) return valor === CLAVE_CORRECTA;
      return normalizarTexto(valor) === normalizarTexto(CLAVE_CORRECTA);
    }

    function mostrarMensaje(tipo, texto){
      msg.className = "msg " + tipo; // "ok" o "err"
      msg.textContent = texto;
    }

    function validar(){
      const valor = input.value;
      if (esCorrecto(valor)) {
        btn.disabled = false;
        mostrarMensaje("ok", "✅ Correcto. Ya puedes continuar.");
      } else {
        btn.disabled = true;
        mostrarMensaje("err", "❌ Texto incorrecto. Corrígelo e inténtalo de nuevo.");
      }
    }

    // Validación mientras escribe
    input.addEventListener("input", validar);

    // Enter para validar/continuar
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        validar();
        if (!btn.disabled) {
          window.location.href = "diaps.html";
        }
      }
    });

    // Click en continuar
    btn.addEventListener("click", () => {
      if (!btn.disabled) window.location.href = "diaps.html";
    });

    // Estado inicial: muestra mensaje solo si escribe algo
    msg.style.display = "none";
    input.addEventListener("input", () => {
      msg.style.display = input.value.trim() ? "block" : "none";
    });
  </script>
</body>
</html>
